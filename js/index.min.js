gsap.registerPlugin(ScrollTrigger);
const e = new LocomotiveScroll({
  el: document.querySelector(".scrollContainer"),
  smooth: !0,
  multiplier: 1.3,
  smoothMobile: true,
});
function o(e, o) {
  const t = document.querySelectorAll(".burger__open"),
    r = t[0] == e ? t[1] : t[0];
  let s = r.querySelector(".burger__open--one"),
    n = r.querySelector(".burger__open--two"),
    a = r.querySelector(".burger__open--three");
  "open" === o
    ? (gsap.set(n, { scale: 0.1 }),
      gsap.set(a, { y: "-8", rotationZ: 45, transformOrigin: "50% 50%" }),
      gsap.set(s, { rotationZ: -45, y: "8", transformOrigin: "50% 50%" }))
    : (gsap.set(n, { scale: 1 }),
      gsap.set(a, { y: "0", rotationZ: 0, transformOrigin: "50% 50%" }),
      gsap.set(s, { rotationZ: 0, y: "0", transformOrigin: "50% 50%" })),
    (s = e.querySelector(".burger__open--one")),
    (n = e.querySelector(".burger__open--two")),
    (a = e.querySelector(".burger__open--three")),
    "open" === o
      ? (gsap.to(n, { duration: 0.1, ease: "expo.out", scale: 0.1 }),
        gsap.to(a, {
          duration: 0.1,
          ease: "expo.out",
          y: "-8",
          rotationZ: 45,
          transformOrigin: "50% 50%",
        }),
        gsap.to(s, {
          duration: 0.1,
          ease: "expo.out",
          rotationZ: -45,
          y: "8",
          transformOrigin: "50% 50%",
        }))
      : (gsap.to(n, { duration: 0.1, ease: "expo.out", scale: 1 }),
        gsap.to(a, {
          duration: 0.1,
          ease: "expo.out",
          y: "0",
          rotationZ: 0,
          transformOrigin: "50% 50%",
        }),
        gsap.to(s, {
          duration: 0.1,
          ease: "expo.out",
          rotationZ: 0,
          y: "0",
          transformOrigin: "50% 50%",
        }));
}
function t() {
  !(function () {
    const e = gsap.utils.toArray(".main-nav a"),
      o = gsap.utils.toArray(".main-nav a").reverse(),
      t = document.querySelector(".burger__desk");
    function r(r) {
      const s = 1 === r;
      t.disabled = !s;
      const n = document.querySelector(".burger__open--one"),
        a = document.querySelector(".burger__open--two"),
        i = document.querySelector(".burger__open--three");
      s
        ? (gsap.to(n, { duration: 0.3, scaleX: 1, x: 0 }),
          gsap.to(a, { duration: 0.3, scaleX: 1, x: 0 }),
          gsap.to(i, { duration: 0.3, scaleX: 1, x: 0 }))
        : (gsap.to(a, { duration: 0.3, scaleX: 1.3, x: "-5px" }),
          gsap.to(i, { duration: 0.3, scaleX: 0.8, x: "4px" }));
      const l = s ? e : o;
      return gsap.to(l, {
        duration: 0.3,
        stagger: 0.05,
        opacity: () => (s ? 0 : 1),
        y: () => (s ? 20 : 0),
        ease: "Power4.out",
      });
    }
    e.forEach((e) => {
      e.addEventListener("mouseleave", (o) => {
        e.classList.add("animate-out"),
          setTimeout(() => {
            e.classList.remove("animate-out");
          }, 300);
      });
    }),
      ScrollTrigger.create({
        start: 150,
        end: "bottom bottom-=40",
        scroller: ".scrollContainer",
        toggleClass: { targets: "body", className: "has-scrolled" },
        onEnter: ({ direction: e }) => r(e),
        onLeaveBack: ({ direction: e }) => r(e),
        markers: !1,
      });
  })(),
    (function () {
      const e = gsap.utils.toArray(".menu a"),
        t = document.querySelectorAll(".burger__open"),
        r = document.querySelector(".menu");
      e.forEach((e) => {
        e.addEventListener("mouseleave", (o) => {
          e.classList.add("animate-out"),
            setTimeout(() => {
              e.classList.remove("animate-out");
            }, 300);
        });
      }),
        t.forEach((e) => {
          e.addEventListener("click", (s) => {
            e.classList.contains("closed")
              ? (o(s.target, "open"),
                (r.style.display = "block"),
                gsap.to(r, {
                  duration: 0.5,
                  scaleY: 1,
                  transformOrigin: "top top",
                  ease: "power4.inOut",
                }),
                t[0].classList.remove("closed"),
                t[1].classList.remove("closed"))
              : (o(s.target, "close"),
                gsap.to(r, {
                  duration: 0.5,
                  scaleY: -1,
                  transformOrigin: "top top",
                  ease: "powe4.inOut",
                }),
                t[0].classList.add("closed"),
                t[1].classList.add("closed"));
          });
        });
    })();
}
e.on("scroll", ScrollTrigger.update),
  ScrollTrigger.scrollerProxy(".scrollContainer", {
    scrollTop(o) {
      return arguments.length
        ? e.scrollTo(o, 0, 0)
        : e.scroll.instance.scroll.y;
    },
    getBoundingClientRect: () => ({
      top: 0,
      left: 0,
      width: window.innerWidth,
      height: window.innerHeight,
    }),
    pinType: document.querySelector(".scrollContainer").style.transform
      ? "transform"
      : "fixed",
  }),
  window.addEventListener("load", function () {
    t();
  }),
  e.on("scroll", ({ scroll: e, limit: o }) => {
    const t = (e.y / o.y) * 100 - 100 + "%";
    gsap.set(".fill", { y: t });
  }),
  ScrollTrigger.addEventListener("refresh", () => e.update()),
  ScrollTrigger.refresh();
