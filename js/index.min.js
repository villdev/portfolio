gsap.registerPlugin(ScrollTrigger);
const e = new LocomotiveScroll({
  el: document.querySelector(".scrollContainer"),
  smooth: !0,
  multiplier: 1.3,
  reloadOnContextChange: !0,
});
function o(e, o) {
  document.querySelectorAll(".burger__open");
  (burgerOne = e.querySelector(".burger__open--one")),
    (burgerTwo = e.querySelector(".burger__open--two")),
    (burgerThree = e.querySelector(".burger__open--three")),
    "open" === o
      ? (gsap.to(burgerTwo, { duration: 0.1, ease: "expo.out", scale: 0.1 }),
        gsap.to(burgerThree, {
          duration: 0.1,
          ease: "expo.out",
          y: "-8",
          rotationZ: 45,
          transformOrigin: "50% 50%",
        }),
        gsap.to(burgerOne, {
          duration: 0.1,
          ease: "expo.out",
          rotationZ: -45,
          y: "8",
          transformOrigin: "50% 50%",
        }))
      : (gsap.to(burgerTwo, { duration: 0.1, ease: "expo.out", scale: 1 }),
        gsap.to(burgerThree, {
          duration: 0.1,
          ease: "expo.out",
          y: "0",
          rotationZ: 0,
          transformOrigin: "50% 50%",
        }),
        gsap.to(burgerOne, {
          duration: 0.1,
          ease: "expo.out",
          rotationZ: 0,
          y: "0",
          transformOrigin: "50% 50%",
        }));
}
function r() {
  !(function () {
    const e = gsap.utils.toArray(".main-nav a"),
      o = gsap.utils.toArray(".main-nav a").reverse(),
      r = document.querySelector(".burger__desk");
    function t(t) {
      const n = 1 === t;
      r.disabled = !n;
      const s = document.querySelector(".burger__desk .burger__open--one"),
        a = document.querySelector(".burger__desk .burger__open--two"),
        l = document.querySelector(".burger__desk .burger__open--three");
      n
        ? (gsap.to(s, { duration: 0.3, scaleX: 1, x: 0 }),
          gsap.to(a, { duration: 0.3, scaleX: 1, x: 0 }),
          gsap.to(l, { duration: 0.3, scaleX: 1, x: 0 }))
        : (gsap.to(a, { duration: 0.3, scaleX: 1.3, x: "-5px" }),
          gsap.to(l, { duration: 0.3, scaleX: 0.8, x: "4px" }));
      const c = n ? e : o;
      return gsap.to(c, {
        duration: 0.3,
        stagger: 0.05,
        opacity: () => (n ? 0 : 1),
        y: () => (n ? 20 : 0),
        ease: "Power4.out",
      });
    }
    e.forEach((e) => {
      e.addEventListener("mouseleave", (o) => {
        e.classList.add("animate-out"),
          setTimeout(() => {
            e.classList.remove("animate-out");
          }, 300);
      });
    }),
      ScrollTrigger.create({
        start: 150,
        end: "bottom bottom-=40",
        scroller: ".scrollContainer",
        toggleClass: { targets: "body", className: "has-scrolled" },
        onEnter: ({ direction: e }) => t(e),
        onLeaveBack: ({ direction: e }) => t(e),
        markers: !1,
      });
  })(),
    (function () {
      const e = gsap.utils.toArray(".menu a"),
        r = document.querySelectorAll(".burger__open"),
        t = document.querySelector(".menu");
      e.forEach((e) => {
        e.addEventListener("mouseleave", (o) => {
          e.classList.add("animate-out"),
            setTimeout(() => {
              e.classList.remove("animate-out");
            }, 300);
        });
      }),
        r.forEach((e) => {
          e.addEventListener("click", (n) => {
            e.classList.contains("closed")
              ? (o(e, "open"),
                (t.style.display = "block"),
                gsap.to(t, {
                  duration: 0.5,
                  scaleY: 1,
                  transformOrigin: "top top",
                  ease: "power4.inOut",
                }),
                r[0].classList.remove("closed"),
                r[1].classList.remove("closed"))
              : (o(e, "close"),
                gsap.to(t, {
                  duration: 0.5,
                  scaleY: -1,
                  transformOrigin: "top top",
                  ease: "powe4.inOut",
                }),
                r[0].classList.add("closed"),
                r[1].classList.add("closed"));
          });
        });
    })();
}
e.on("scroll", ScrollTrigger.update),
  ScrollTrigger.scrollerProxy(".scrollContainer", {
    scrollTop(o) {
      return arguments.length
        ? e.scrollTo(o, 0, 0)
        : e.scroll.instance.scroll.y;
    },
    getBoundingClientRect: () => ({
      top: 0,
      left: 0,
      width: window.innerWidth,
      height: window.innerHeight,
    }),
    pinType: document.querySelector(".scrollContainer").style.transform
      ? "transform"
      : "fixed",
  }),
  window.addEventListener("load", function () {
    r();
  }),
  (window.onscroll = function () {
    var e, r, t;
    (e = document.body.scrollTop || document.documentElement.scrollTop),
      (r =
        document.documentElement.scrollHeight -
        document.documentElement.clientHeight),
      (t = (t = -100 + (t = (e / r) * 100)) + "%"),
      (document.querySelector(".fill").style.transform = `translateY(${t})`);
    const n = document.querySelector(".burger__open"),
      s = document.querySelector(".menu");
    n.classList.contains("closed") ||
      (o("close"), (s.style.display = "none"), n.classList.add("closed"));
  }),
  e.on("scroll", ({ scroll: e, limit: o }) => {
    const r = (e.y / o.y) * 100 - 100 + "%";
    gsap.set(".fill", { y: r });
  }),
  ScrollTrigger.addEventListener("refresh", () => e.update()),
  ScrollTrigger.refresh();
